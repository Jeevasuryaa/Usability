<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=390, initial-scale=1.0"/>
  <title>Expense Categories</title>
  <style>
    html,body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100vw;
      background: #e8ebf0;
    }
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background: #dfe5ef;
    }
    .container {
      width: 390px;
      height: 844px;
      background: #f7f9fa;
      border-radius: 28px;
      box-shadow: 0 2px 16px #3375c833;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      position: relative;
    }
    .header-bg {
      background: #286bcb;
      height: 290px;
      border-bottom-left-radius: 38px;
      border-bottom-right-radius: 38px;
      width: 100%;
      position: absolute;
      top: 0;
      left: 0;
      z-index: 1;
    }
    .header {
      position: relative;
      z-index: 2;
      padding: 0 0 4px 0;
      width: 100%;
      text-align: center;
    }
    .header-top {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      padding: 16px 22px 0 12px;
      font-size: 23px;
      color: #fff;
      font-weight: bold;
    }
    .header-top .back {
      font-size:26px;
      color:#fff;
      font-weight:bold;
      cursor:pointer;
      margin-right:15px;
    }
    .header-title {
      width: 100%;
      text-align: center;
      position: absolute;
      top: 25px;
      left: 0;
      color: #fff;
      font-size: 21px;
      letter-spacing: .04em;
      font-weight: bold;
    }
    .budget-section {
      margin-top: 45px;
      padding: 0 22px;
    }
    .budget-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 6px;
      align-items: end;
    }
    .budget-block {
      color: #fff;
      font-size: 19px;
      font-weight: bold;
      text-align: left;
    }
    .budget-block .lbl {
      font-size: 13px;
      font-weight: 500;
      color: #dae7fa;
      margin-bottom: 2px;
      display: block;
    }
    .budget-block.expenses {
      color: #ffd7dc;
      text-align: right;
    }
    .budget-block strong {
      font-size: 22px;
      font-weight: bold;
      color: #fff;
    }
    .progress-bar-wrap {
      margin-top: 8px;
      background: #fff;
      border-radius: 12px;
      padding: 11px 0 5px 0;
      box-shadow: 0 1px 10px #3375c81a;
      position: relative;
    }
    .cat-progress-bg {
      width: 80%;
      height: 10px;
      background: #bedafd;
      margin: 0 auto;
      border-radius: 8px;
      overflow: hidden;
      margin-top: 3px;
      position: relative;
    }
    .cat-progress-fill {
      background: #286bcb;
      height: 100%;
      width: 32%;
      border-radius: 8px 0 0 8px;
      transition: width 0.4s;
    }
    .cat-progress-labels {
      display: flex;
      justify-content: space-between;
      width: 80%;
      margin: 3px auto 0 auto;
      font-size: 14px;
      color: #1b3266;
      font-weight: bold;
    }
    .cat-progress-percent {
      color: #ffb500;
      font-weight: bold;
    }
    .cat-progress-amount {
      color: #222;
      font-weight: bold;
      font-size: 14px;
    }
    .progress-note {
      margin-top: 7px;
      color: #eaefff;
      font-size: 13px;
      text-align: left;
      width: 80%;
      margin-left: 10%;
      font-weight: 500;
      letter-spacing: .02em;
    }
    .main-categories {
      width: 100%;
      background: none;
      border-radius: 38px 38px 0 0;
      position: relative;
      margin-top: 36px;
      padding: 30px 0 0 0;
      z-index: 3;
    }
    .categories-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 22px 0;
      width: 100%;
      justify-items: center;
      box-sizing: border-box;
      padding: 0 8px 0 8px;
    }
    .cat-tile {
      width: 94px;
      height: 100px;
      background: #e8f2fe;
      border-radius: 18px;
      box-shadow: 0 2px 10px #3375c813;
      margin-bottom: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      transition: box-shadow .1s;
      cursor: pointer;
      position: relative;
    }
    .cat-tile:active {
      box-shadow: 0 4px 12px #286bcb42;
    }
    .cat-icon-block {
      width: 44px; height: 44px; background: #286bcb;
      border-radius: 12px;
      margin-bottom: 12px;
      display: flex; align-items: center; justify-content: center;
    }
    .cat-icon-block span {
      font-size: 24px;
      color: #fff;
    }
    .cat-label {
      color: #2b415e;
      font-size: 15.5px;
      font-weight: bold;
      text-align: center;
      letter-spacing: .01em;
    }
    .cat-limit {
      font-size: 12px;
      color: #7ea3d8;
      font-weight: 600;
      letter-spacing: .01em;
      text-align: center;
      margin-top: 2px;
    }
    .plus-tile {
      background: #e3ebfb;
      border: 2px dashed #8cbefb;
      color: #286bcb;
      justify-content: center;
    }
    .plus-tile .cat-icon-block {
      background: transparent;
      padding: 0;
      width: 44px;
      height: 44px;
      border-radius: 12px;
    }
    .plus-tile .cat-icon-block span {
      color: #286bcb;
      font-size: 34px;
    }
    /* Modal styles */
    .modal-bg {
      display: none;
      position: fixed;
      left: 0; top: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.16);
      z-index: 99;
      align-items: center;
      justify-content: center;
    }
    .modal-bg.active {
      display: flex;
    }
    .modal-dialog {
      width: 74vw;
      max-width: 340px;
      background: #fff;
      border-radius: 18px;
      padding: 34px 24px 24px 24px;
      box-shadow: 0 3px 18px #286bcb44;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 260px;
      position: relative;
    }
    .modal-dialog .modal-title {
      color: #286bcb;
      font-size: 19px;
      font-weight: bold;
      margin: 0 0 16px 0;
      align-self: flex-start;
      width: 100%;
      text-align: left;
    }
    .modal-dialog .modal-input {
      width: 100%;
      padding: 12px 11px;
      border-radius: 11px;
      font-size: 16px;
      border: 1.7px solid #a5bcde;
      background: #f5f9fd;
      margin-bottom: 18px;
      color: #286bcb;
      font-weight: 500;
      outline: none;
    }
    .modal-dialog .modal-button {
      width: 100%;
      border: none;
      border-radius: 11px;
      font-size: 16px;
      font-weight: bold;
      background: #286bcb;
      color: #fff;
      padding: 12px 0;
      margin-bottom: 9px;
      cursor: pointer;
      transition: background .2s;
    }
    .modal-dialog .modal-button:last-child {
      background: #c8e3ff;
      color: #286bcb;
      margin-bottom: 0;
    }
    @media (max-width:480px){
      .container{ height:100vh; border-radius:0;}
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header-bg"></div>
    <div class="header">
      <div class="header-top">
        <span class="back" onclick="window.history.back()">&larr;</span>
        <span class="header-title">Categories</span>
      </div>
      <div class="budget-section">
        <div class="budget-row">
          <div class="budget-block">
            <span class="lbl">Total Balance</span>
            <strong id="total-balance">$7,783.00</strong>
          </div>
          <div class="budget-block expenses">
            <span class="lbl">Total Expense</span>
            <strong id="total-expense">-$1,187.40</strong>
          </div>
        </div>
        <div class="progress-bar-wrap">
          <div class="cat-progress-bg">
            <div class="cat-progress-fill" id="total-progressbar"></div>
          </div>
          <div class="cat-progress-labels">
            <span class="cat-progress-percent" id="total-progress-label">30%</span>
            <span class="cat-progress-amount" id="total-budget-label">$20,000.00</span>
          </div>
        </div>
        <div class="progress-note" id="progress-note">30% Of Your Expenses. Looks Good.</div>
      </div>
    </div>
    <div class="main-categories">
      <div class="categories-grid" id="categories-grid">
        <!-- Populated by JS -->
      </div>
    </div>
    <!-- Modal for add category -->
    <div class="modal-bg" id="modal-bg">
      <div class="modal-dialog">
        <div class="modal-title">New Category</div>
        <input class="modal-input" id="category-name" placeholder="Write..."/>
        <input class="modal-input" id="category-limit" type="number" min="1" placeholder="Enter budget limit"/>
        <button class="modal-button" onclick="addCategory()">Save</button>
        <button class="modal-button" style="margin-bottom:0;" onclick="closeModal()">Cancel</button>
      </div>
    </div>
  </div>
  <script>
    // Predefined category data (emojis, color is via CSS)
    let categories = [
      { name:"Food", icon:"🍴", limit:500 },
      { name:"Fashion", icon:"👔", limit:300 },
      { name:"Bills", icon:"🧾", limit:600 },
      { name:"Groceries", icon:"🛒", limit:650 },
      { name:"Rent", icon:"🏠", limit:1200 },
      { name:"Gifts", icon:"🎁", limit:200 },
      { name:"Savings", icon:"💰", limit:900 },
      { name:"Entertainment", icon:"🎭", limit:350 }
    ];
    // Budget values for demonstration (hardcoded as per image, adjust as needed)
    let totalBudget = 20000.00;
    let totalExpense = categories.reduce((sum,cat)=>sum+cat.limit,0) * 0.30; // simulate 30% spent
    let totalBalance = 7783.00;

    function updateHeader() {
      document.getElementById('total-balance').textContent = "$" + totalBalance.toLocaleString(undefined,{minimumFractionDigits:2});
      document.getElementById('total-expense').textContent = "-$" + totalExpense.toLocaleString(undefined,{minimumFractionDigits:2});
      document.getElementById('total-progress-label').textContent = Math.round((totalExpense/totalBudget)*100)+"%";
      document.getElementById('total-budget-label').textContent = "$"+totalBudget.toLocaleString(undefined,{minimumFractionDigits:2});
      document.getElementById('progress-note').textContent = Math.round((totalExpense/totalBudget)*100) + "% Of Your Expenses. Looks Good.";
      document.getElementById('total-progressbar').style.width = Math.max(7,Math.round((totalExpense/totalBudget)*100))+"%"; // 7% minimum for visibility
    }

    function renderCategories() {
      let grid = document.getElementById('categories-grid');
      grid.innerHTML = "";
      categories.forEach((cat,i)=>{
        grid.innerHTML += `<div class="cat-tile" onclick="onCategoryClick('${cat.name}')">
            <div class="cat-icon-block"><span>${cat.icon}</span></div>
            <div class="cat-label">${cat.name}</div>
            <div class="cat-limit">Limit: $${cat.limit}</div>
          </div>`;
      });
      // + Button
      grid.innerHTML += `<div class="cat-tile plus-tile" onclick="openModal()">
          <div class="cat-icon-block"><span>+</span></div>
          <div class="cat-label">More</div>
        </div>`;
    }

    function onCategoryClick(name) {
      if(name==="Food"){
        // Empty page for now. In a SPA, could route here:
        window.location.href = "c2.html";
      }
      // For other categories, you can implement further routing in the future
    }

    // Modal dialogs
    function openModal() {
      document.getElementById('modal-bg').classList.add('active');
      document.getElementById('category-name').value = "";
      document.getElementById('category-limit').value = "";
      setTimeout(()=>{document.getElementById('category-name').focus();},120);
    }
    function closeModal() {
      document.getElementById('modal-bg').classList.remove('active');
    }
    function addCategory() {
      let name = document.getElementById('category-name').value.trim();
      let limit = Number(document.getElementById('category-limit').value.trim());
      if(!name || !limit || limit <= 0){
        alert("Category name and valid budget limit required!"); return;
      }
      categories.push({ name, icon:"➕", limit });
      renderCategories();
      closeModal();
    }

    // Initial render
    updateHeader();
    renderCategories();
  </script>
</body>
</html>
